<!DOCTYPE html>

<html>
<head>
  <title>autocomplete.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>autocomplete.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>Adapted from: https:// <a href="http://www.w3schools.com/howto/howto_js_autocomplete.asp">www.w3schools.com/howto/howto_js_autocomplete.asp</a>  </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autocomplete</span>(<span class="hljs-params">inp, arr</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>the autocomplete function takes two arguments,
the text field element and an array of possible autocompleted values: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> currentFocus;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>execute a function when someone writes in the text field: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    inp.addEventListener(<span class="hljs-string">"input"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> a, b, i, val = <span class="hljs-keyword">this</span>.value;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>close any already open lists of autocompleted values </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        closeAllLists();
        <span class="hljs-keyword">if</span> (!val) { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;}
        currentFocus = <span class="hljs-number">-1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>create a DIV element that will contain the items (values): </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        a = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"DIV"</span>);
        a.setAttribute(<span class="hljs-string">"id"</span>, <span class="hljs-keyword">this</span>.id + <span class="hljs-string">"autocomplete-list"</span>);
        a.setAttribute(<span class="hljs-string">"class"</span>, <span class="hljs-string">"autocomplete-items"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>append the DIV element as a child of the autocomplete container: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>.parentNode.appendChild(a);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>for each item in the array… </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
            <span class="hljs-keyword">var</span> match = (arr[i].toUpperCase()).indexOf(val.toUpperCase());

            <span class="hljs-keyword">if</span> (match != <span class="hljs-number">-1</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>create a DIV element for each matching element: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                b = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"DIV"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>make the matching letters bold: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                b.innerHTML = arr[i].substr(<span class="hljs-number">0</span>, match);
                b.innerHTML += <span class="hljs-string">"&lt;strong&gt;"</span> + arr[i].substr(match, val.length) + <span class="hljs-string">"&lt;/strong&gt;"</span>;
                b.innerHTML += arr[i].substr(match + val.length, arr[i].length - <span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>insert a input field that will hold the current array item’s value: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                b.innerHTML += <span class="hljs-string">"&lt;input type='hidden' value='"</span> + arr[i] + <span class="hljs-string">"'&gt;"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>execute a function when someone clicks on the item value (DIV element): </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                b.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>insert the value for the autocomplete text field: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    inp.value = <span class="hljs-keyword">this</span>.getElementsByTagName(<span class="hljs-string">"input"</span>)[<span class="hljs-number">0</span>].value;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>close the list of autocompleted values,
(or any other open lists of autocompleted values: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    closeAllLists();
                });

                a.appendChild(b);
            }
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>execute a function presses a key on the keyboard: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    inp.addEventListener(<span class="hljs-string">"keydown"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> x = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-keyword">this</span>.id + <span class="hljs-string">"autocomplete-list"</span>);
        <span class="hljs-keyword">if</span> (x) x = x.getElementsByTagName(<span class="hljs-string">"div"</span>);
        <span class="hljs-keyword">if</span> (e.keyCode == <span class="hljs-number">40</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>If the arrow DOWN key is pressed,
increase the currentFocus variable: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            currentFocus++;</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>and and make the current item more visible: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            addActive(x);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.keyCode == <span class="hljs-number">38</span>) { <span class="hljs-comment">// up</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>If the arrow UP key is pressed,
decrease the currentFocus variable: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            currentFocus--;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>and and make the current item more visible: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            addActive(x);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.keyCode == <span class="hljs-number">13</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>If the ENTER key is pressed, prevent the form from being submitted, </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            e.preventDefault();
            <span class="hljs-keyword">if</span> (currentFocus &gt; <span class="hljs-number">-1</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>and simulate a click on the “active” item: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (x) x[currentFocus].click();
            }
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addActive</span>(<span class="hljs-params">x</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>a function to classify an item as “active”: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!x) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>start by removing the “active” class on all items: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        removeActive(x);
        <span class="hljs-keyword">if</span> (currentFocus &gt;= x.length) currentFocus = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (currentFocus &lt; <span class="hljs-number">0</span>) currentFocus = (x.length - <span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>add class “autocomplete-active”: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        x[currentFocus].classList.add(<span class="hljs-string">"autocomplete-active"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeActive</span>(<span class="hljs-params">x</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>a function to remove the “active” class from all autocomplete items: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; x.length; i++) {
        x[i].classList.remove(<span class="hljs-string">"autocomplete-active"</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeAllLists</span>(<span class="hljs-params">elmnt</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>close all autocomplete lists in the document,
except the one passed as an argument: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> x = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">"autocomplete-items"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; x.length; i++) {
        <span class="hljs-keyword">if</span> (elmnt != x[i] &amp;&amp; elmnt != inp) {
            x[i].parentNode.removeChild(x[i]);
        }
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>execute a function when someone clicks in the document: </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        closeAllLists(e.target);
    });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>initiate the autocomplete function on the “myInput” element, and pass along the foodItems array as possible autocomplete values: </p>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
